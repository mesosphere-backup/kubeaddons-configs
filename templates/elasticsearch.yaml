---
apiVersion: kubeaddons.mesosphere.io/v1alpha1
kind: Addon
metadata:
  name: elasticsearch
  namespace: kubeaddons
  labels:
    kubeaddons.mesosphere.io/name: elasticsearch
  annotations:
    appversion.kubeaddons.mesosphere.io: "6.7.0"
spec:
  kubernetes:
    minSupportedVersion: v1.14.0
  cloudProvider:
    - name: aws
      enabled: true
    - name: docker
      enabled: false
    - name: none
      enabled: true
  chartReference:
    chart: stable/elasticsearch
    version: 1.26.2
    values: |
      ---
      client:
        replicas: 1
        heapSize: 512m
        resources:
          limits:
            cpu: 1000m
            memory: 1024Mi
          requests:
            cpu: 200m
            memory: 768Mi
      master:
        replicas: 2
        persistence:
          size: "512Mi"
        updateStrategy:
          type: RollingUpdate
        heapSize: 512m
        resources:
          # need more cpu upon initialization, therefore burstable class
          limits:
            cpu: 1000m
            memory: 1024Mi
          requests:
            cpu: 200m
            memory: 768Mi
      data:
        replicas: 1
        persistence:
          size: "2Gi"
        updateStrategy:
          type: RollingUpdate
        hooks:
          drain:
            enabled: false
        heapSize: 768m
        resources:
          # need more cpu upon initialization, therefore burstable class
          limits:
            cpu: 2000m
            memory: 1536Mi
          requests:
            cpu: 500m
            memory: 1152Mi
