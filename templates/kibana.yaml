---
apiVersion: kubeaddons.mesosphere.io/v1alpha1
kind: Addon
metadata:
  name: kibana
  namespace: kubeaddons
  labels:
    kubeaddons.mesosphere.io/name: kibana
  annotations:
    appversion.kubeaddons.mesosphere.io: "6.7.0"
    endpoint.kubeaddons.mesosphere.io/kibana: "/ops/portal/kibana"
spec:
  kubernetes:
    minSupportedVersion: v1.14.0
  cloudProvider:
    - name: aws
      enabled: true
    - name: docker
      enabled: false
    - name: none
      enabled: true
  chartReference:
    chart: stable/kibana
    version: 3.0.0
    values: |
      ---
      files:
        kibana.yml:
          ## Default Kibana configuration from kibana-docker.
          elasticsearch.url: http://elasticsearch-kubeaddons-client:9200
          ## Ref: https://www.elastic.co/guide/en/kibana/current/settings.html
          server.basePath: /ops/portal/kibana
      serviceAccount:
        create: true
      service:
        type: ClusterIP
        externalPort: 5601
        internalPort: 5601
      resources:
        # need more cpu upon initialization, therefore burstable class
        limits:
          cpu: 500m
        requests:
          cpu: 50m
